<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Digital Clock using Vanilla JS</title>
		<link
			rel="shortcut icon"
			href="./images/logo.png"
			type="image/x-icon"
		/>
		<style>
		  @import url("https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap");
      .dot::before {
      	box-shadow: 0 0 20px var(--c), 0 0 60px var(--c);
      }
      .pie {
      	--p: 20;
      }
      .pie:before {
      	background: radial-gradient(farthest-side, var(--c) 98%, #0000) top/8px 8px
      			no-repeat,
      		conic-gradient(var(--c) calc(var(--p) * 1%), #0000 0);
      	-webkit-mask: radial-gradient(
      		farthest-side,
      		#0000 calc(99% - 8px),
      		#000 calc(100% - 8px)
      	);
      	mask: radial-gradient(
      		farthest-side,
      		#0000 calc(99% - 8px),
      		#000 calc(100% - 8px)
      	);
      }
      .no-round:before {
      	background-size: 0 0, auto;
      }
      .no-round:after {
      	content: none;
      }
		</style>
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						colors: {
							"light-gray": "#303640",
							seconds: "rgba(6, 252, 63, 1)",
							minutes: "rgba(252, 230, 0, 1)",
							hours: "rgba(253, 41, 112, 1)",
						},
						fontFamily: {
							body: ["Ubuntu", "sans-serif"],
						},
					},
				},
			};
		</script>
	</head>
	<body onclick="toogleSeconds()"
		class="min-h-screen grid place-content-center bg-light-gray space-y-10 font-body text-white"
		style="overflow: hidden;"
	>
		<main class="container flex flex-col lg:flex-row gap-8 lg:gap-10">
			<article
				class="relative w-48 h-48 lg:w-56 lg:h-56 xl:w-60 xl:h-60 inline-grid place-content-center text-center border-8 border-[#191919] rounded-full before:rounded-full after:rounded-full after:absolute before:absolute before:-inset-2 pie no-round"
				style="--p: 20; --c: rgba(253, 41, 112, 1)"
			>
				<span
					class="absolute inset-0 w-full h-full before:absolute before:inset-0 before:w-7 before:h-7 before:left-[4.5rem] lg:before:left-24 before:-top-4 before:bg-hours before:rounded-full transition-all duration-500 dot"
					id="dot-hour"
				></span>
				<h3
					class="font-bold text-base lg:text-lg xl:text-xl flex flex-col gap-1 lg:gap-3"
				>
					<span
						class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl"
						id="hour"
					></span>

					<span>HOURS</span>
				</h3>
			</article>
			<article
				class="relative w-48 h-48 lg:w-56 lg:h-56 xl:w-60 xl:h-60 inline-grid place-content-center text-center border-8 border-[#191919] rounded-full before:rounded-full after:rounded-full after:absolute before:absolute before:-inset-2 pie no-round"
				style="--p: 20; --c: rgba(252, 230, 0, 1)"
			>
				<span
					class="absolute inset-0 w-full h-full before:absolute before:inset-0 before:w-7 before:h-7 before:left-[4.5rem] lg:before:left-24 before:-top-4 before:bg-minutes before:rounded-full transition-all duration-500 dot"
					id="dot-minute"
				></span>
				<h3
					class="font-bold text-base lg:text-lg xl:text-xl flex flex-col gap-1 lg:gap-3"
				>
					<span
						class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl"
						id="minutes"
					></span>

					<span>MINUTES</span>
				</h3>
			</article>
			<article id="secondsEl"
				class="relative w-48 h-48 lg:w-56 lg:h-56 xl:w-60 xl:h-60 inline-grid place-content-center text-center border-8 border-[#191919] rounded-full before:rounded-full after:rounded-full after:absolute before:absolute before:-inset-2 pie no-round"
				style="--p: 20; --c: rgba(6, 252, 63, 1)"
			>
				<span
					class="absolute inset-0 w-full h-full before:absolute before:inset-0 before:w-7 before:h-7 before:left-[4.5rem] lg:before:left-24 before:-top-4 before:bg-seconds before:rounded-full transition-all duration-500 dot"
					id="dot-second"
				></span>
				<h3
					class="font-bold text-base lg:text-lg xl:text-xl flex flex-col gap-1 lg:gap-3"
				>
					<span
						class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl"
						id="seconds"
					></span>

					<span>SECONDS</span>
				</h3>
			</article>
			<article
				class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl lg:relative absolute right-5"
				id="ampm"
			>
				PM
			</article>
		</main>

		<!--footer class="text-sm text-center">
			Coded by
			<a
				href="https://github.com/ujjwalgarg100204"
				class="font-serif text-blue-300 hover:text-blue-200 hover:underline"
			>
				Ujjwal Garg
			</a>
			.
		</footer-->
		<script>
		  // Selectors
      const hourSpan = document.querySelector("#hour");
      const minSpan = document.querySelector("#minutes");
      const secSpan = document.querySelector("#seconds");
      const amPMSpan = document.querySelector("#ampm");
      const hourDot = document.querySelector("#dot-hour");
      const minDot = document.querySelector("#dot-minute");
      const secDot = document.querySelector("#dot-second");
      const hourContainer = hourDot.parentElement;
      const minContainer = minDot.parentElement;
      const secContainer = secDot.parentElement;
      let clockTimer = null;
      let isSecondsVisible = true;
      
      function toogleSeconds() {
        const secondsEl = document.getElementById( 'secondsEl' );
        isSecondsVisible = !isSecondsVisible;
        secondsEl.style.visibility = ( isSecondsVisible? "visible": "hidden" );
        if( clockTimer ) {
          clearInterval( clockTimer );
        }
        setClock();
      }
      
      function updateClock() {
      	const now = new Date();
      	const time = {
      		hour: now.getHours(),
      		minute: now.getMinutes(),
      		sec: now.getSeconds(),
      	};
      
      	// update time in document
      	hourSpan.textContent = padWithZeroes(time.hour, 2);
      	minSpan.textContent = padWithZeroes(time.minute, 2);
      	secSpan.textContent = padWithZeroes(time.sec, 2);
      	amPMSpan.textContent = time.hour < 12 ? "AM" : "PM";
      
      	// update bar fill
      	hourContainer.style.setProperty("--p", `${(time.hour / 24) * 100}`);
      	minContainer.style.setProperty("--p", `${(time.minute / 60) * 100}`);
      	secContainer.style.setProperty("--p", `${(time.sec / 60) * 100}`);
      
      	// update dot location
      	hourDot.style.transform = `rotate(${
      		(time.hour * 360) / 24 + time.hour * 360
      	}deg)`;
      	minDot.style.transform = `rotate(${
      		(time.minute * 360) / 60 + time.hour * 360
      	}deg)`;
      	secDot.style.transform = `rotate(${
      		(time.sec * 360) / 60 + time.minute * 360
      	}deg)`;
      }
      function setClock() {
        // main clock logic
        clockTimer = setInterval( updateClock, 1000*(isSecondsVisible? 1: 60));
      }
      
      // Hide seconds by default
      toogleSeconds();
      // First clock update
      updateClock();
      // Set clock interval
      setClock();
      
      // utility functions
      /**
       *
       * @param {number} number the number which you want to pad with zeroes to left
       * @param {number} length total length of number including zeroes
       * @returns {string}
       */
      function padWithZeroes(number, length) {
      	const zeroes = Array(length - number.toString().length)
      		.fill("0")
      		.join("");
      	return zeroes + number.toString(); // concatenating zeroes to given number
      }
		</script>
	</body>
</html>